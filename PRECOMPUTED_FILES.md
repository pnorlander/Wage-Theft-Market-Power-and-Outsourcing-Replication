# Pre-computed Files Documentation

This document describes which files in the replication package are pre-computed (shipped with the package) versus generated by the replication code.

## Overview

The replication package provides two execution options:
- **Option A (Default)**: Use pre-computed `.ster` files for fast table generation
- **Option B (Full)**: Run all regressions from scratch (set `run_regressions = 1` in `00_master.do`)

## Pre-computed Files (Shipped with Package)

### 1. Estimation Results (`.ster` files)

All files in the `sters/` directory are pre-computed Stata estimation results:

**Main Tables:**
- `table2_col[1-6].ster` - Table 2: Wages, Skill Levels (6 columns)
- `table3_col[1-7].ster` - Table 3: Log Violations (7 columns)
- `table4_col[1-8].ster` - Table 4: IV Regressions (8 columns)

**Appendix Tables:**
- `tablea1_col[1-7].ster` - Table A.1: Negative Binomial (7 columns)
- `tablea2a_col[1-4].ster` - Table A.2 Panel A: Weighted Log Violations FE (4 columns)
- `tablea2b_col[1-4].ster` - Table A.2 Panel B: Weighted Log Violations RE (4 columns)
- `tablea3a_col[1-4].ster` - Table A.3 Panel A: Weighted Log Back Wages FE (4 columns)
- `tablea3b_col[1-4].ster` - Table A.3 Panel B: Weighted Log Back Wages RE (4 columns)
- `tablea4_col[1-7].ster` - Table A.4: Unweighted Log Back Wages (7 columns)
- `tablea5a_col[1-4].ster` - Table A.5 Panel A: Log BW/PW FE (4 columns)
- `tablea5b_col[1-4].ster` - Table A.5 Panel B: Log BW/PW RE (4 columns)
- `tablea6_col[1-8].ster` - Table A.6: Log BW/PW with HHI x Sub (8 columns)
- `tablea7_col[1-8].ster` - Table A.7: Log Violations Occ-CZ-Year (8 columns)
- `tablea8_col[1-8].ster` - Table A.8: Log Violations Industry-CZ-Year (8 columns)
- `tablea9a_col[1-4].ster` - Table A.9 Panel A: Unweighted Log Violations FE (4 columns)
- `tablea9b_col[1-4].ster` - Table A.9 Panel B: Unweighted Log Violations RE (4 columns)
- `tablea10_col[1-8].ster` - Table A.10: Log Violations with HHI x Sub (8 columns)
- `tablea11a_col[1-4].ster` - Table A.11 Panel A: Unweighted Log Back Wages FE (4 columns)
- `tablea11b_col[1-4].ster` - Table A.11 Panel B: Unweighted Log Back Wages RE (4 columns)
- `tablea12_col[1-8].ster` - Table A.12: Log Back Wages with HHI x Sub (8 columns)

**Reason for Pre-computation:** Negative binomial regressions with firm fixed effects are computationally intensive (8+ hours per column). Pre-computed results ensure replicators can verify table generation without extensive computation time.

### 2. Pre-generated Figure

- `output/figures/fig1_network.pdf` - Figure 1: Network Graph of Silicon Valley Outsourcing

**Reason for Pre-generation:** The source data file for Figure 1 (h1b_2019_match_clients.dta) is 3.1 GB and cannot be included in the replication package. The code to generate this figure is provided in `02_figures.do` (commented out) for reference.

### 3. Data Files

- `data/master_db.dta` - Main analysis dataset (230 MB)
- `data/iv_data.dta` - Instrumental variable data (for Table 4)

## Generated Files (Created by Replication Code)

The following files are generated when running `00_master.do`:

### Tables (output/tables/)

All LaTeX table files are generated by `01_tables.do`:
- `table1.tex`, `table1_panelA.tex`, `table1_panelB.tex` - Descriptive Statistics
- `table2.tex` - Wages, Skill Levels
- `table3.tex` - Log Violations
- `table4.tex` - IV Regressions
- `table5_panelA.tex`, `table5_panelB.tex` - Marginal Effects
- `table6_panelA.tex`, `table6_panelB.tex` - Probabilities
- `table_a1.tex` through `table_a12.tex` - Appendix Tables

### Figures (output/figures/)

Generated by `02_figures.do`:
- `fig2a_kdensity.pdf` - Kernel Density of Wage Premium
- `fig2b_prob_viol.pdf` - Probability of Violation vs Wage Premium
- `fig3_hhibar.pdf` - HHI Bar Chart by Violation Category
- `fig4_viol_intensity.pdf` - Violations Intensity by HHI, Subcontractor, Skill Level
- `fig5_probs.pdf` - Probability Firm Has Violation (4-panel)

## Verification

To verify that generated outputs match the paper:

1. Run `do code/00_master.do` in Stata
2. Compare generated `.tex` files with coefficients in the paper
3. Compare generated `.pdf` figures visually with paper figures
4. Compile `replication_paper.tex` to view all outputs together

## Notes

- Running Option B (full regression) will overwrite the `.ster` files
- If you wish to preserve the original `.ster` files, make a backup before setting `run_regressions = 1`
- Table A.1 (Negative Binomial) is not regenerated in Option B due to computational time; it uses pre-computed results
